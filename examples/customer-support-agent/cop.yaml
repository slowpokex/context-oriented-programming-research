# Customer Support Agent - COP Package
# Minimal manifest format - most settings auto-detected

meta:
  name: "customer-support-agent"
  version: "1.2.0"
  description: "Production-ready customer support agent with multi-persona support"
  author: "COP Examples"
  license: "MIT"
  keywords: [support, customer-service, conversational, multi-persona]

# Core Context Definition
context:
  system:
    source: "./prompts/system.md"
    variables:
      company_name:
        type: string
        required: true
        default: "Acme Corp"
        description: "Your company's display name"
      support_email:
        type: string
        required: true
        format: email
        default: "support@acme.com"
        description: "Support email for escalations"
      business_hours:
        type: string
        default: "9 AM - 5 PM EST, Monday-Friday"
      max_refund_amount:
        type: number
        default: 500
        description: "Max refund amount without escalation"

  personas:
    default: "professional"
    available:
      professional:
        source: "./personas/professional.yaml"
        description: "Formal, efficient communication"
      friendly:
        source: "./personas/friendly.yaml"
        description: "Warm, conversational style"
      technical:
        source: "./personas/technical.yaml"
        description: "Detailed technical explanations"

  knowledge:
    - name: "faq"
      source: "./knowledge/faq.md"
      type: static
    - name: "products"
      source: "./knowledge/products.json"
      type: structured
    - name: "policies"
      source: "./knowledge/policies.md"
      type: static

  guardrails:
    - name: "safety"
      source: "./guardrails/safety.yaml"
      priority: 100
    - name: "compliance"
      source: "./guardrails/compliance.yaml"
      priority: 90
    - name: "brand"
      source: "./guardrails/brand.yaml"
      priority: 80

  tools:
    - name: "lookup_order"
      source: "./tools/lookup_order.yaml"
    - name: "create_ticket"
      source: "./tools/create_ticket.yaml"
    - name: "process_refund"
      source: "./tools/process_refund.yaml"
      requires_approval: true
      max_amount: "${max_refund_amount}"

# Build Configuration - minimal, uses defaults
build:
  # Linking enabled - RAG auto-enabled for synthetic generation
  linking:
    enabled: true

  # Synthetic data generation
  synthetic:
    enabled: true
    samples: 20
    scenarios:
      - "order inquiry"
      - "refund request"
      - "product question"
      - "complaint"
      - "general support"
      - "shipping delay"
      - "account issue"
      - "billing question"

# Test Suites
evaluation:
  test_suites:
    - name: "unit"
      path: "./tests/unit/"
      type: deterministic
    - name: "behavioral"
      path: "./tests/behavioral/"
      type: llm-judged
    - name: "safety"
      path: "./tests/safety/"
      type: adversarial
    - name: "regression"
      path: "./tests/regression/"
      type: comparison
      baseline_version: "1.1.0"
