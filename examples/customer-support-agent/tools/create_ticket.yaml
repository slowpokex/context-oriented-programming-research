# Tool Definition: Create Support Ticket
# Creates a new support ticket in the system

name: create_ticket
description: "Create a new support ticket for tracking and escalation"
version: "1.0.0"

openai_spec:
  type: function
  function:
    name: create_ticket
    description: "Creates a support ticket for issues that need tracking or escalation"
    parameters:
      type: object
      properties:
        customer_email:
          type: string
          description: "Customer's email address"
          format: email
        subject:
          type: string
          description: "Brief summary of the issue"
          maxLength: 200
        description:
          type: string
          description: "Detailed description of the issue"
        priority:
          type: string
          description: "Ticket priority level"
          enum: ["low", "medium", "high", "urgent"]
          default: "medium"
        category:
          type: string
          description: "Issue category"
          enum: ["billing", "technical", "product", "shipping", "general"]
        related_order_id:
          type: string
          description: "Related order ID if applicable"
      required: ["customer_email", "subject", "description", "category"]

response_schema:
  type: object
  properties:
    success:
      type: boolean
    ticket:
      type: object
      properties:
        id:
          type: string
        status:
          type: string
          enum: ["open", "pending", "in_progress"]
        created_at:
          type: string
          format: date-time
        estimated_response:
          type: string
    error:
      type: object
      properties:
        code:
          type: string
        message:
          type: string

examples:
  - description: "Create a billing ticket"
    input:
      customer_email: "customer@example.com"
      subject: "Incorrect charge on my account"
      description: "I was charged $29.99 but I'm on the $9.99 plan"
      priority: "high"
      category: "billing"
    output:
      success: true
      ticket:
        id: "TKT-78901"
        status: "open"
        created_at: "2024-01-15T10:30:00Z"
        estimated_response: "Within 4 hours"

security:
  - "Validate customer email format"
  - "Sanitize description field for injection attacks"
  - "Log ticket creation for audit purposes"

rate_limits:
  per_session: 5
  per_minute: 2
